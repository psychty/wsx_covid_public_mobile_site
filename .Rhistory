lwd = 1.2))
grid.roundrect(x = unit(0.04, "npc"),
y = unit(0.305, "npc"),
width = unit(.45, "npc"),
height = unit(0.43, "npc"),
just = "left",
default.units = "npc",
gp=gpar(fill = "#ffffff", col = "#ffffff"),
vp = NULL)
vac_uptake_12_plus_gg <- ggplot(vac_info_df_12_plus, aes(x = 1.9,
y = People,
fill = Status_label)) +
geom_bar(stat="identity") +
xlim(.1, 2.5) +
coord_polar(theta = "y",
start = 0,
direction = 1) +
labs(x = NULL,
y = NULL) +
scale_fill_manual(values = c("#00563f", "#fa8800", "#dbdbdb"),
breaks = rev(levels(vac_info_df_12_plus$Status_label)),
name = '') +
scale_colour_manual(values= "#ffffff", guide = FALSE) +
theme_bw()+
theme(axis.ticks=element_blank(),
axis.text=element_blank(),
axis.title=element_blank(),
panel.grid=element_blank(),
panel.border=element_blank(),
plot.margin = unit(c(0, 0, 0, 0), "cm"),
panel.background = element_rect(fill = "transparent",colour = NA),
plot.background = element_rect(fill = "transparent",colour = NA),
legend.position = 'none')
print(vac_uptake_12_plus_gg,
vp = vplayout(15:22, 1:10))
grid.text(paste0('In West Sussex, there have'),
just = "left",
x = unit(0.28, "npc"),
y = unit(0.48, "npc"),
gp = gpar(col = "#000000",
# fontfamily = 'Verdana',
fontsize = "10"))
grid.text(paste0('been a total of ', format(wsx_12_plus_first_doses, big.mark = ',')),
just = "left",
x = unit(0.28, "npc"),
y = unit(0.46, "npc"),
gp = gpar(col = "#000000",
# fontfamily = 'Verdana',
fontsize = "10"))
grid.text(paste0('first doses received among'),
just = "left",
x = unit(0.28, "npc"),
y = unit(0.44, "npc"),
gp = gpar(col = "#000000",
# fontfamily = 'Verdana',
fontsize = "10"))
grid.text(paste0('those aged 12 and over.'),
just = "left",
x = unit(0.28, "npc"),
y = unit(0.42, "npc"),
gp = gpar(col = "#000000",
# fontfamily = 'Verdana',
fontsize = "10"))
grid.text(paste0(round(wsx_12_plus_first_doses_proportion * 100, 0), '%'),
just = "centre",
x = unit(0.1725, "npc"),
y = unit(0.43, "npc"),
gp = gpar(col = "#000000",
fontsize = "18",
# fontfamily = 'Verdana',
fontface = 'bold'))
grid.text(paste0('of those aged'),
just = "centre",
x = unit(0.172, "npc"),
y = unit(0.41, "npc"),
gp = gpar(col = "#000000",
# fontfamily = 'Verdana',
fontsize = "9"))
grid.text(paste0('12+ have received'),
just = "centre",
x = unit(0.1675, "npc"),
y = unit(0.395, "npc"),
gp = gpar(col = "#000000",
# fontfamily = 'Verdana',
fontsize = "9"))
grid.text(paste0('at least one'),
just = "centre",
x = unit(0.172, "npc"),
y = unit(0.38, "npc"),
gp = gpar(col = "#000000",
# fontfamily = 'Verdana',
fontsize = "9"))
grid.text(paste0('dose'),
just = "centre",
x = unit(0.172, "npc"),
y = unit(0.365, "npc"),
gp = gpar(col = "#000000",
# fontfamily = 'Verdana',
fontsize = "9"))
grid.rect(x = unit(0.29, "npc"),
y = unit(0.38, "npc"),
width = unit(0.0175, "npc"),
height = unit(0.0175, "npc"),
just = "centre",
default.units = "npc",
gp=gpar(fill = "#00563f",
col = "#00563f"),
draw = TRUE,
vp = NULL)
grid.text(paste0(format(wsx_12_plus_second_doses, big.mark = ','),' received two doses'),
just = "left",
x = unit(0.305, "npc"),
y = unit(0.38, "npc"),
gp = gpar(col = "#000000",
# fontfamily = 'Verdana',
fontsize = "9"))
grid.rect(x = unit(0.29, "npc"),
y = unit(0.355, "npc"),
width = unit(0.0175, "npc"),
height = unit(0.0175, "npc"),
just = "centre",
default.units = "npc",
gp=gpar(fill = "#fa8800",
col = "#fa8800"),
draw = TRUE,
vp = NULL)
grid.text(paste0(format(wsx_12_plus_first_dose_only, big.mark = ','),' first dose only'),
just = "left",
x = unit(0.305, "npc"),
y = unit(0.355, "npc"),
gp = gpar(col = "#000000",
# fontfamily = 'Verdana',
fontsize = "9"))
grid.rect(x = unit(0.29, "npc"),
y = unit(0.33, "npc"),
width = unit(0.0175, "npc"),
height = unit(0.0175, "npc"),
just = "centre",
default.units = "npc",
gp=gpar(fill = "#dbdbdb",
col = "#dbdbdb"),
draw = TRUE,
vp = NULL)
grid.text(paste0(format(wsx_12_plus_unvaccinated, big.mark = ','),' not vaccinated'),
just = "left",
x = unit(0.305, "npc"),
y = unit(0.33, "npc"),
gp = gpar(col = "#000000",
# fontfamily = 'Verdana',
fontsize = "9"))
vac_uptake_18_plus_gg <- ggplot(vac_info_df_18_plus, aes(x = 1.9,
y = People,
fill = Status)) +
geom_bar(stat="identity") +
xlim(.1, 2.5) +
coord_polar(theta = "y",
start = 0,
direction = 1) +
labs(x = NULL,
y = NULL) +
scale_fill_manual(values = c('#01a1ec','#00563f', "#fa8800", "#dbdbdb"),
breaks = rev(levels(vac_info_df_18_plus$Status)),
name = '') +
scale_colour_manual(values= "#ffffff", guide = FALSE) +
theme_bw()+
theme(axis.ticks=element_blank(),
axis.text=element_blank(),
axis.title=element_blank(),
panel.grid=element_blank(),
panel.border=element_blank(),
plot.margin = unit(c(0, 0, 0, 0), "cm"),
panel.background = element_rect(fill = "transparent",colour = NA),
plot.background = element_rect(fill = "transparent",colour = NA),
legend.position = 'none')
print(vac_uptake_18_plus_gg,
vp = vplayout(21:28, 1:10))
grid.text(paste0(round(wsx_18_plus_first_doses_proportion * 100, 0), '%'),
just = "centre",
x = unit(0.1725, "npc"),
y = unit(0.23, "npc"),
gp = gpar(col = "#000000",
fontsize = "18",
# fontfamily = 'Verdana',
fontface = 'bold'))
grid.text(paste0('of those aged'),
just = "centre",
x = unit(0.172, "npc"),
y = unit(0.21, "npc"),
gp = gpar(col = "#000000",
# fontfamily = 'Verdana',
fontsize = "9"))
grid.text(paste0('18+ received'),
just = "centre",
x = unit(0.1675, "npc"),
y = unit(0.195, "npc"),
gp = gpar(col = "#000000",
# fontfamily = 'Verdana',
fontsize = "9"))
grid.text(paste0('at least one'),
just = "centre",
x = unit(0.172, "npc"),
y = unit(0.18, "npc"),
gp = gpar(col = "#000000",
# fontfamily = 'Verdana',
fontsize = "9"))
grid.text(paste0('dose'),
just = "centre",
x = unit(0.172, "npc"),
y = unit(0.165, "npc"),
gp = gpar(col = "#000000",
# fontfamily = 'Verdana',
fontsize = "9"))
grid.text(paste0('In West Sussex, there have'),
just = "left",
x = unit(0.28, "npc"),
y = unit(0.29, "npc"),
gp = gpar(col = "#000000",
# fontfamily = 'Verdana',
fontsize = "10"))
grid.text(paste0('been a total of ', format(wsx_18_plus_first_doses, big.mark = ',')),
just = "left",
x = unit(0.28, "npc"),
y = unit(0.27, "npc"),
gp = gpar(col = "#000000",
# fontfamily = 'Verdana',
fontsize = "10"))
grid.text(paste0('first doses received among'),
just = "left",
x = unit(0.28, "npc"),
y = unit(0.25, "npc"),
gp = gpar(col = "#000000",
# fontfamily = 'Verdana',
fontsize = "10"))
grid.text(paste0('those aged 18 and over.'),
just = "left",
x = unit(0.28, "npc"),
y = unit(0.23, "npc"),
gp = gpar(col = "#000000",
# fontfamily = 'Verdana',
fontsize = "10"))
grid.rect(x = unit(0.29, "npc"),
y = unit(0.20, "npc"),
width = unit(0.0175, "npc"),
height = unit(0.0175, "npc"),
just = "centre",
default.units = "npc",
gp=gpar(fill = "#01a1ec",
col = "#01a1ec"),
draw = TRUE,
vp = NULL)
grid.text(paste0(format(wsx_18_plus_third_doses, big.mark = ','),' received three'),
just = "left",
x = unit(0.305, "npc"),
y = unit(0.20, "npc"),
gp = gpar(col = "#000000",
# fontfamily = 'Verdana',
fontsize = "9"))
grid.text(paste0('(including booster) doses'),
just = "left",
x = unit(0.305, "npc"),
y = unit(0.18, "npc"),
gp = gpar(col = "#000000",
# fontfamily = 'Verdana',
fontsize = "9"))
grid.rect(x = unit(0.29, "npc"),
y = unit(0.16, "npc"),
width = unit(0.0175, "npc"),
height = unit(0.0175, "npc"),
just = "centre",
default.units = "npc",
gp=gpar(fill = "#00563f",
col = "#00563f"),
draw = TRUE,
vp = NULL)
grid.text(paste0(format(wsx_18_plus_second_doses, big.mark = ','),' received two doses'),
just = "left",
x = unit(0.305, "npc"),
y = unit(0.16, "npc"),
gp = gpar(col = "#000000",
# fontfamily = 'Verdana',
fontsize = "9"))
grid.rect(x = unit(0.29, "npc"),
y = unit(0.135, "npc"),
width = unit(0.0175, "npc"),
height = unit(0.0175, "npc"),
just = "centre",
default.units = "npc",
gp=gpar(fill = "#fa8800",
col = "#fa8800"),
draw = TRUE,
vp = NULL)
grid.text(paste0(format(wsx_18_plus_first_dose_only, big.mark = ','),' first dose only'),
just = "left",
x = unit(0.305, "npc"),
y = unit(0.135, "npc"),
gp = gpar(col = "#000000",
# fontfamily = 'Verdana',
fontsize = "9"))
grid.rect(x = unit(0.29, "npc"),
y = unit(0.11, "npc"),
width = unit(0.0175, "npc"),
height = unit(0.0175, "npc"),
just = "centre",
default.units = "npc",
gp=gpar(fill = "#dbdbdb",
col = "#dbdbdb"),
draw = TRUE,
vp = NULL)
grid.text(paste0(format(wsx_18_plus_unvaccinated, big.mark = ','),' not vaccinated'),
just = "left",
x = unit(0.305, "npc"),
y = unit(0.11, "npc"),
gp = gpar(col = "#000000",
# fontfamily = 'Verdana',
fontsize = "9"))
# Over time ####
grid.roundrect(x = unit(0.5, "npc"),
y = unit(0.45, "npc"),
width = unit(0.48, "npc"),
height = unit(0.13, "npc"),
just = "left",
default.units = "npc",
gp=gpar(fill = "#ffffff",
col = "#ffffff"),
vp = NULL)
grid.text(paste0('The vaccination programme for West Sussex residents (12+),'),
just = "left",
x = unit(0.51, "npc"),
y = unit(0.5, "npc"),
gp = gpar(col = "#000000",
fontsize = "9",
# fontfamily = 'Verdana',
fontface = 'bold'))
grid.text(paste0('in the seven days to ', This_week_vac_date, ', has delivered:'),
just = "left",
x = unit(0.51, "npc"),
y = unit(0.48, "npc"),
gp = gpar(col = "#000000",
fontsize = "9",
# fontfamily = 'Verdana',
fontface = 'bold'))
grid.text(format(wsx_first_doses_seven_days, big.mark = ','),
just = "centre",
x = unit(0.57, "npc"),
y = unit(0.44, "npc"),
gp = gpar(col = "#000000",
fontsize = "30",
fontfamily = 'Bahnschrift',
fontface = 'bold'))
grid.text('first doses',
just = "centre",
x = unit(0.57, "npc"),
y = unit(0.41, "npc"),
gp = gpar(col = "#000000",
fontsize = "9",
fontface = 'bold'))
grid.text(format(wsx_second_doses_seven_days, big.mark = ','),
just = "centre",
x = unit(0.72, "npc"),
y = unit(0.44, "npc"),
gp = gpar(col = "#000000",
fontsize = "30",
fontfamily = 'Bahnschrift',
fontface = 'bold'))
grid.text('second doses',
just = "centre",
x = unit(0.72, "npc"),
y = unit(0.41, "npc"),
gp = gpar(col = "#000000",
fontsize = "9",
fontface = 'bold'))
grid.text(format(wsx_third_doses_seven_days, big.mark = ','),
just = "centre",
x = unit(0.89, "npc"),
y = unit(0.44, "npc"),
gp = gpar(col = "#000000",
fontsize = "30",
fontfamily = 'Bahnschrift',
fontface = 'bold'))
grid.text('third/booster doses',
just = "centre",
x = unit(0.89, "npc"),
y = unit(0.41, "npc"),
gp = gpar(col = "#000000",
fontsize = "9",
fontface = 'bold'))
grid.text('COVID-19 IN HOSPITALS',
just = "left",
x = unit(0.53, "npc"),
y = unit(0.35, "npc"),
gp = gpar(col = "#ffffff",
fontsize = "20",
fontfamily = 'Bahnschrift',
fontface = 'bold'))
grid.text('ACROSS THE REGION',
just = "left",
x = unit(0.53, "npc"),
y = unit(0.32, "npc"),
gp = gpar(col = "#ffffff",
fontsize = "20",
fontfamily = 'Bahnschrift',
fontface = 'bold'))
grid.text(paste0('In the South East region on ', format(se_hospital_df$Date, '%A '), ordinal(as.numeric(format(se_hospital_df$Date, '%d'))), format(se_hospital_df$Date, ' %B'), ', there'),
just = "left",
x = unit(0.53, "npc"),
y = unit(0.28, "npc"),
gp = gpar(col = "#ffffff",
fontsize = "10",
# fontfamily = 'Verdana',
fontface = 'bold'))
grid.text(paste0('were ', format(se_hospital_df$Patients_occupying_beds, big.mark = ','), ' COVID-19 positive patients in hospital beds.'),
just = "left",
x = unit(0.53, "npc"),
y = unit(0.26, "npc"),
gp = gpar(col = "#ffffff",
fontsize = "10",
# fontfamily = 'Verdana',
fontface = 'bold'))
grid.text(paste0('The number of people in hospital beds with COVID-19'),
just = "left",
x = unit(0.53, "npc"),
y = unit(0.22, "npc"),
gp = gpar(col = "#ffffff",
fontsize = "10",
# fontfamily = 'Verdana',
fontface = 'bold'))
grid.text(paste0('has ', se_hospital_df$Change_direction, ' compared to the 7 days before (', format(se_hospital_df$Previous_occupying_beds, big.mark = ','), ')'),
just = "left",
x = unit(0.53, "npc"),
y = unit(0.2, "npc"),
gp = gpar(col = "#ffffff",
fontsize = "10",
# fontfamily = 'Verdana',
fontface = 'bold'))
grid.text(paste0('Of those patients currently in hospital, ', format(se_hospital_df$Patients_occupying_mv_beds, big.mark = ','), ' were'),
just = "left",
x = unit(0.53, "npc"),
y = unit(0.16, "npc"),
gp = gpar(col = "#ffffff",
fontsize = "10",
# fontfamily = 'Verdana',
fontface = 'bold'))
grid.text(paste0('occupying beds capable of mechanical ventilation.'),
just = "left",
x = unit(0.53, "npc"),
y = unit(0.14, "npc"),
gp = gpar(col = "#ffffff",
fontsize = "10",
# fontfamily = 'Verdana',
fontface = 'bold'))
# Banner bottom #
grid.rect(x = unit(0.5, "npc"),
y = unit(0.04, "npc"),
width = unit(1, "npc"),
height = unit(0.08, "npc"),
just = "centre",
default.units = "npc",
gp=gpar(fill = "#F8E821",
col = "#F8E821"),
draw = TRUE,
vp = NULL)
grid.text('PUBLICATION DATE:',
just = "left",
x = unit(0.04, "npc"),
y = unit(0.04, "npc"),
gp = gpar(col = "#000000",
fontsize = "16",
fontfamily = 'Bahnschrift',
fontface = 'bold'))
grid.text(paste0(ordinal(as.numeric(format(last_date + 1 , '%d'))), format(last_date +1, ' %B %Y')),
just = "left",
x = unit(0.3, "npc"),
y = unit(0.04, "npc"),
gp = gpar(col = "#0071B6",
fontsize = "18",
# fontfamily = 'Verdana',
fontface = 'bold'))
grid.text(paste0('*We measure change by looking at cases in this week'),
just = "left",
x = unit(0.6, "npc"),
y = unit(0.069, "npc"),
gp = gpar(col = "#000000",
# fontfamily = 'Verdana',
fontsize = "9"))
grid.text(paste0('(seven days to ', format(complete_date, '%A '), ordinal(as.numeric(format(complete_date, '%d'))), format(complete_date, ' %B %Y'), ') compared'),
just = "left",
x = unit(0.6, "npc"),
y = unit(0.055, "npc"),
gp = gpar(col = "#000000",
# fontfamily = 'Verdana',
fontsize = "9"))
grid.text(paste0('to the last week (seven days to ', ordinal(as.numeric(format(complete_date - 7, '%d'))), format(complete_date - 7, ' %B %Y'), '). This is '),
just = "left",
x = unit(0.6, "npc"),
y = unit(0.04, "npc"),
gp = gpar(col = "#000000",
# fontfamily = 'Verdana',
fontsize = "9"))
grid.text(paste0('because data for more recent days are considered incomplete.'),
just = "left",
x = unit(0.6, "npc"),
y = unit(0.025, "npc"),
gp = gpar(col = "#000000",
# fontfamily = 'Verdana',
fontsize = "9"))
grid.raster(wscc_logo,
y = unit(0.96, "npc"),
x = unit(0.85, "npc"),
vjust = 1,
hjust = 0,
width = .12)
dev.off()
